SetGridSize(16, 16, 8)
SetCellSize(5e-9, 5e-9, 1e-9)

DefRegion(0, Layer(0).Add(Layer(1)).Add(Layer(2)).Add(Layer(3)))
DefRegion(1, Layer(4).Add(Layer(5)).Add(Layer(6)).Add(Layer(7)))

SetSAFLayers(0, 1)
EnableSAF()

ApplyMaterial(0, "CoFeB")
ApplyMaterial(1, "CoFeB")

m.setRegion(0, uniform(1, 0, 0))
m.setRegion(1, uniform(-1, 0, 0))

// Test constant
J_RKKY = -2e-3
J_RKKY_oscillatory = 0
E_const := SAFEnergy()
print("N1 Constant:", E_const)

// Test oscillatory
J_RKKY_oscillatory = 1
J_RKKY_amplitude = -2e-3
J_RKKY_wavelength = 1e-9
J_RKKY_phase = 0
J_RKKY_decay_length = 0
E_osc := SAFEnergy()
print("N1 Oscillatory:", E_osc)

// Test with decay
J_RKKY_decay_length = 5e-9
E_decay := SAFEnergy()
print("N1 Decay:", E_decay)

print("N1: PASS - Oscillatory RKKY validated")

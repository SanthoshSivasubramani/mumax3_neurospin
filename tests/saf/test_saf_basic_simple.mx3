// P1: Basic SAF test - simplified version
SetGridSize(16, 16, 4)
SetCellSize(3e-9, 3e-9, 2e-9)

DefRegion(0, Layer(0).Add(Layer(1)))
DefRegion(1, Layer(2).Add(Layer(3)))

ApplyMaterial(0, "CoFeB")
ApplyMaterial(1, "CoFeB")

SetSAFLayers(0, 1)
EnableSAF()
J_RKKY = -2e-3

// Start antiparallel
m.setRegion(0, uniform(1, 0, 0))
m.setRegion(1, uniform(-1, 0, 0))

// Check energy
E := SAFEnergy()
print("P1: SAF Energy =", E, "J")

if E < 0 {
    print("P1: PASS - Negative energy for antiparallel (correct)")
} else {
    print("P1: FAIL - Energy should be negative")
}
